Content-type: text/html

<HTML><HEAD><TITLE>Manpage of NetsukukuD</TITLE>
</HEAD><BODY>
<H1>NetsukukuD</H1>
Section:  (8)<BR>Updated: 2006-04-06<BR><A HREF="#index">Index</A>
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>

<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

ntkd - Netsukuku protocol daemon
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<A NAME="ixAAC"></A>
ntkd [-hvadrD46] [-i net_interface] [-c conf_file]
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<A NAME="ixAAD"></A>
Netsukuku is a mesh network or a P2P net system that generates and sustains
itself autonomously. It is designed to handle an unlimited number of nodes with
minimal <FONT SIZE="-1">CPU</FONT> and memory resources. Thanks to this feature it can be easily
used to build a worldwide distributed, anonymous and anarchical network,
separated from the Internet, without the support of any servers, ISPs or
authority controls.
Keep in mind that it is a _physical network_, it isn't built upon any other
existing net, therefore there must be computers linked _physically_ each
other, then Netsukuku will build the routes.
For more information read the section ``2.4  So, <FONT SIZE="-1">WTF</FONT> is it?'' of the
document.
<P>

In order to join to Netsukuku you have to use <B>ntkd</B>, which is the
daemon implenting the Npv7 protocol.
The daemon at startup takes the list of all the network interfaces which are
currently <FONT SIZE="-1">UP</FONT> and it uses all of them to send and receive packets. If you want
to force the daemon to use specific interfaces you should use the <B>-i</B>
option.
The ports it listens to are: 269-udp, 269-tcp, 271-udp, 277-udp, 277-tcp. So
be sure to open them in the firewall.
<P>

For more information about Netsukuku visit:
&lt;<A HREF="http://netsukuku.freaknet.org">http://netsukuku.freaknet.org</A>&gt;
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<A NAME="ixAAE"></A>
<DL COMPACT>
<DT><B>-4</B>, <B>--ipv4</B><DD>
<A NAME="ixAAF"></A>
Forces the daemon to use ipv4 addresses only
<DT><B>-6</B>, <B>--ipv6</B><DD>
<A NAME="ixAAG"></A>
Forces the daemon to use ipv6 addresses only. Warning, this is still
experimental.
<DT><B>-i</B> <I>interface</I>, <B>--iface</B> <I>interface</I><DD>
<A NAME="ixAAH"></A>
Specifies the network interface the daemon will use to join Netsukuku, i.e.
wlan0. You can use more than one interface by specifying multiple times the
<B>-i</B> option. For example: <B>ntkd</B> -i wlan0 -i eth0 -i wifi1 -i eth1
<DT><B>-a</B>, <B>--no_andna</B><DD>
<A NAME="ixAAI"></A>
Forces <B>ntkd</B> to don't run the <FONT SIZE="-1">ANDNA</FONT> daemon when started.
<DT><B>-R</B>, <B>--no_resolv</B><DD>
<A NAME="ixAAJ"></A>
When <B>NetsukukuD</B> starts it modifies <I>/etc/resolv.conf</I> writing in the first
line the string ``nameserver 127.0.0.1''. The old <I>/etc/resolv.conf</I> is copied in
<I>/etc/resolv.conf.bak</I>. When the daemon is closed <I>/etc/resolv.conf</I> is
restored. If you want to disable this set use the <B>-R</B> option.
<DT><B>-r</B><I>[bool]</I>, <B>--restricted</B>=<I>[bool]</I><DD>
<A NAME="ixAAK"></A>
With this option the daemon will run in restricted mode as specified in
the Npv7, only IPs of a private class will be choosen. It is used for
Internet compatibility. 
If no argument is given to the option, the default restricted private class
10.0.0.0 is used, otherwise if <I>bool</I> is not zero, the restricted class will
be 172.16.0.0-172.31.255.255.
<DT><B>-I</B>, <B>--share-inet</B><DD>
<A NAME="ixAAL"></A>
Tells NetsukukuD to run in restricted mode (see <B>-r</B>) and to share your
Internet connection. Please check the relative options in
<I>/etc/netsukuku/netsukuku.conf</I>
<DT><B>-D</B>, <B>--no_daemon</B><DD>
<A NAME="ixAAM"></A>
This option tells <B>ntkd</B> to don't detach to background and
daemonizing itself. The daemon will run on foreground instead.
<DT><B>-c</B> <I>configuration_file</I>, <B>--conf</B> <I>configuration_file</I><DD>
<A NAME="ixAAN"></A>
Specifies the name of the configuration file. The
default is /etc/netsukuku/netsukuku.conf. <B>ntkd</B> will not start
without a configuration file.
<DT><B>-d</B>, <B>--debug</B><DD>
<A NAME="ixAAO"></A>
With this option the daemon will run with displaying its debug messages.
The more -d you specify the more debug messages you'll get. Sometimes it's
cool to use it, but be careful and don't go insane ;)
<DT><B>-h</B>, <B>--help</B><DD>
<A NAME="ixAAP"></A>
Display a the list of available options and their brief description.
<DT><B>-v</B>, <B>--version</B><DD>
<A NAME="ixAAQ"></A>
Displays the version of the <B>ntkd</B> daemon.
</DL>
<A NAME="lbAF">&nbsp;</A>
<H2>EXAMPLES</H2>

<A NAME="ixAAR"></A>
Usually you'll just want to use <B>ntkd</B> with a wifi device:
<P>

ntk-wifi wlan0
<P>

ntkd -i wlan0
<P>

If you one to use more than one network interface:
<P>

ntkd -i eth0 -i wlan0 -i wifi1 -i eth2
<A NAME="lbAG">&nbsp;</A>
<H2>SIGNALS</H2>

<A NAME="ixAAS"></A>
When the <B></B><FONT SIZE="-1"><B>SIGHUP</B></FONT><B></B> signal is sent to <B>ntkd</B>, the <I>andna_hostnames</I> file
is reloaded and the daemon tries to register all the new added hostnames.
<P>

When the <B></B><FONT SIZE="-1"><B>SIGALRM</B></FONT><B></B> signal is sent to <B>ntkd</B>, the resolved hostnames
cache is flushed.
<A NAME="lbAH">&nbsp;</A>
<H2>LOGS</H2>

<A NAME="ixAAT"></A>
If <B>ntkd</B> is started as a daemon (without the <B>-D</B> option), all the
logs are sent to syslog under the <FONT SIZE="-1">LOG_DAEMON</FONT> category.
<P>

If the no-daemon option (<B>-D</B>) is used, all the logs are printed to
<I>stderr</I>.
<A NAME="lbAI">&nbsp;</A>
<H2>FILES</H2>

<A NAME="ixAAU"></A>
<DL COMPACT>
<DT><I>/etc/netsukuku/netsukuku.conf</I><DD>
<A NAME="ixAAV"></A>
It is the default path for the <B>ntkd</B> configuration file. It's
possible to choose another file using the <B>-c</B> option.
<DT><I>/etc/netsukuku/andna_hostnames</I><DD>
<A NAME="ixAAW"></A>
It is the file where the hostnames to be registerd in <FONT SIZE="-1">ANDNA</FONT> are kept one per
line. It's location can be changed by modifying its option in the
<I>netsukuku.conf</I> file.
<DT><I>/usr/share/netsukuku/ext_map_file</I><DD>
<A NAME="ixAAX"></A>

<DT><I>/usr/share/netsukuku/int_map_file</I><DD>
<A NAME="ixAAY"></A>
<DT><I>/usr/share/netsukuku/bnode_map_file</I><DD>
<A NAME="ixAAZ"></A>

They are the Netsukuku maps saved by the daemon. Their locations can be
changed in <I>netsukuku.conf</I>.
<DT><I>/usr/share/netsukuku/andna_lcl_keyring</I><DD>
<A NAME="ixABA"></A>
In this keyring your <FONT SIZE="-1">ANDNA</FONT> public and secret keys are saved. Handle this file
with care: without it, you won't be able to update your hostnames, thus 
you'll definitely lose them.
<DT><I>/usr/share/netsukuku/andna_cache</I><DD>
<A NAME="ixABB"></A>

<DT><I>/usr/share/netsukuku/andna_lcl_cache</I><DD>
<A NAME="ixABC"></A>
<DT><I>/usr/share/netsukuku/andna_rh_cache</I><DD>
<A NAME="ixABD"></A>
<DT><I>/usr/share/netsukuku/andna_counter_cache</I><DD>
<A NAME="ixABE"></A>

They are the saved <FONT SIZE="-1">ANDNA</FONT> caches.  Their locations can be 
changed in <I>netsukuku.conf</I>.
<DT><I>/etc/netsukuku/ip_masquerade.sh</I><DD>
<A NAME="ixABF"></A>
This script is launched by NetsukukuD, at its start, when it shares the Internet
connection.
</DL>
<A NAME="lbAJ">&nbsp;</A>
<H2>KERNEL DEPENDENCIES</H2>

<A NAME="ixABG"></A>
On Linux be sure to have the following options set in your kernel .config.
These options are taken from linux-2.6.14.
<P>



<PRE>
        #
        # Networking options
        #
        CONFIG_PACKET=y
        CONFIG_UNIX=y
        CONFIG_INET=y
        CONFIG_IP_MULTICAST=y
        CONFIG_IP_ADVANCED_ROUTER=y
        CONFIG_IP_MULTIPLE_TABLES=y
        CONFIG_IP_ROUTE_MULTIPATH=y
        CONFIG_NET_IPIP=y
        CONFIG_NETFILTER=y

</PRE>


<P>



<PRE>
        #
        # IP: Netfilter Configuration
        #
        CONFIG_IP_NF_CONNTRACK=y
        CONFIG_IP_NF_FTP=y
        CONFIG_IP_NF_IPTABLES=y
        CONFIG_IP_NF_FILTER=y
        CONFIG_IP_NF_TARGET_REJECT=y
        CONFIG_IP_NF_NAT=y
        CONFIG_IP_NF_NAT_NEEDED=y
        CONFIG_IP_NF_TARGET_MASQUERADE=y
        CONFIG_IP_NF_NAT_FTP=y

</PRE>


<P>

If you are using modules you have to load them before launching the daemon.
<A NAME="lbAK">&nbsp;</A>
<H2>BUGS</H2>

<A NAME="ixABH"></A>
{ Don't panic! }
<P>

If you encounter any bug, please report it to <A HREF="mailto:netsukuku@freaknet.org">netsukuku@freaknet.org</A> or
contacts any author explaining what the problem is and if possible a way to
reproduce it.
<A NAME="lbAL">&nbsp;</A>
<H2>CONTACTS</H2>

<A NAME="ixABI"></A>
Subcrive to the netsukuku mailing to get help, be updated on the latest news
and discuss on its development.
<P>

To subscribe to the list, send a message to:
<BR>&nbsp;&nbsp;&nbsp;&lt;<A HREF="mailto:netsukuku-subscribe@freaknet.org">netsukuku-subscribe@freaknet.org</A>&gt;
<P>

We live night and day in <FONT SIZE="-1">IRC</FONT>, come to see us in:
#netsukuku 
on the FreeNode irc server (irc.freenode.org).
<A NAME="lbAM">&nbsp;</A>
<H2>AUTHORS</H2>

<A NAME="ixABJ"></A>
Main authors and maintainers:
<P>

Andrea Lo Pumo aka AlpT &lt;<A HREF="mailto:alpt@freaknet.org">alpt@freaknet.org</A>&gt;
<P>

Main contributors:
<P>

Andrea Leofreddi &lt;<A HREF="mailto:andrea.leofreddi@gmail.com">andrea.leofreddi@gmail.com</A>&gt;, Katolaz &lt;<A HREF="mailto:katolaz@freaknet.org">katolaz@freaknet.org</A>&gt;,
Federico Tomassini &lt;<A HREF="mailto:effetom@gmail.com">effetom@gmail.com</A>&gt;
<P>

For a complete list read the <FONT SIZE="-1">AUTHORS</FONT> file or visit:
&lt;<A HREF="http://netsukuku.freaknet.org/?p=Contacts">http://netsukuku.freaknet.org/?p=Contacts</A>&gt;
<A NAME="lbAN">&nbsp;</A>
<H2>SEE ALSO</H2>

<A NAME="ixABK"></A>
For more information about Netsukuku visit:
&lt;<A HREF="http://netsukuku.freaknet.org">http://netsukuku.freaknet.org</A>&gt;
<P>

<I><A HREF="http://localhost/cgi-bin/man/man2html?8+ntk-wifi">ntk-wifi</A></I>(8), <I><A HREF="http://localhost/cgi-bin/man/man2html?8+andna">andna</A></I>(8), <I><A HREF="http://localhost/cgi-bin/man/man2html?8+iproute2">iproute2</A></I>(8), <I><A HREF="http://localhost/cgi-bin/man/man2html?8+route">route</A></I>(8)
<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">EXAMPLES</A><DD>
<DT><A HREF="#lbAG">SIGNALS</A><DD>
<DT><A HREF="#lbAH">LOGS</A><DD>
<DT><A HREF="#lbAI">FILES</A><DD>
<DT><A HREF="#lbAJ">KERNEL DEPENDENCIES</A><DD>
<DT><A HREF="#lbAK">BUGS</A><DD>
<DT><A HREF="#lbAL">CONTACTS</A><DD>
<DT><A HREF="#lbAM">AUTHORS</A><DD>
<DT><A HREF="#lbAN">SEE ALSO</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 08:43:08 GMT, April 06, 2006
</BODY>
</HTML>
